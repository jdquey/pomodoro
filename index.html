<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pomodoro Timer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
        }

        .container {
            text-align: center;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            max-width: 500px;
            width: 90%;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 20px;
            font-weight: 300;
        }

        .session-info {
            margin-bottom: 30px;
        }

        .session-type {
            font-size: 1.2rem;
            margin-bottom: 10px;
            opacity: 0.9;
        }

        .session-count {
            font-size: 1rem;
            opacity: 0.7;
        }

        .timer-display {
            font-size: 4rem;
            font-weight: 300;
            margin: 30px 0;
            font-family: 'Courier New', monospace;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 30px 0;
        }

        button {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
            backdrop-filter: blur(5px);
        }

        button:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        button:active {
            transform: translateY(0);
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .start-pause-btn {
            background: rgba(76, 175, 80, 0.3);
            border-color: rgba(76, 175, 80, 0.5);
        }

        .start-pause-btn:hover {
            background: rgba(76, 175, 80, 0.5);
        }

        .start-pause-btn.paused {
            background: rgba(255, 152, 0, 0.3);
            border-color: rgba(255, 152, 0, 0.5);
        }

        .start-pause-btn.paused:hover {
            background: rgba(255, 152, 0, 0.5);
        }

        .reset-btn {
            background: rgba(244, 67, 54, 0.3);
            border-color: rgba(244, 67, 54, 0.5);
        }

        .reset-btn:hover {
            background: rgba(244, 67, 54, 0.5);
        }

        .mode-toggle {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }

        .mode-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            backdrop-filter: blur(5px);
        }

        .mode-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-1px);
        }

        .mode-btn.active {
            background: rgba(76, 175, 80, 0.4);
            border-color: rgba(76, 175, 80, 0.6);
            font-weight: 500;
        }

        .mode-btn.active:hover {
            background: rgba(76, 175, 80, 0.5);
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50, #8BC34A);
            border-radius: 3px;
            transition: width 0.3s ease;
            width: 0%;
        }

        .work .progress-fill {
            background: linear-gradient(90deg, #FF6B6B, #FF8E53);
        }

        .break .progress-fill {
            background: linear-gradient(90deg, #4ECDC4, #44A08D);
        }

        .settings {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
        }

        .settings h3 {
            margin-bottom: 15px;
            font-weight: 300;
        }

        .time-inputs {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 15px;
        }

        .time-input {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .time-input label {
            font-size: 0.9rem;
            margin-bottom: 5px;
            opacity: 0.8;
        }

        .time-input input {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 8px 12px;
            border-radius: 8px;
            width: 80px;
            text-align: center;
            font-size: 1rem;
        }

        .time-input input:focus {
            outline: none;
            border-color: rgba(255, 255, 255, 0.6);
            background: rgba(255, 255, 255, 0.2);
        }

        @media (max-width: 480px) {
            .container {
                padding: 20px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .timer-display {
                font-size: 3rem;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
            }
            
            button {
                width: 200px;
            }
            
            .time-inputs {
                flex-direction: column;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üçÖ Pomodoro Timer</h1>
        
        <div class="session-info">
            <div class="session-type" id="sessionType">Work Session</div>
        </div>
        
        <div class="timer-display" id="timerDisplay">25:00</div>
        
        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>
        
        <div class="controls">
            <button id="startPauseBtn" class="start-pause-btn">Start</button>
            <button id="resetBtn" class="reset-btn">Reset</button>
        </div>
        
        <div class="mode-toggle">
            <button id="workModeBtn" class="mode-btn active">Work (25 min)</button>
            <button id="restModeBtn" class="mode-btn">Rest (5 min)</button>
        </div>
        
        <div class="settings">
            <h3>Settings</h3>
            <div class="time-inputs">
                <div class="time-input">
                    <label for="workTime">Work (min)</label>
                    <input type="number" id="workTime" value="25" min="1" max="60">
                </div>
                <div class="time-input">
                    <label for="breakTime">Break (min)</label>
                    <input type="number" id="breakTime" value="5" min="1" max="30">
                </div>
                <div class="time-input">
                    <label for="longBreakTime">Long Break (min)</label>
                    <input type="number" id="longBreakTime" value="15" min="1" max="60">
                </div>
            </div>
        </div>
    </div>

    <script>
        class PomodoroTimer {
            constructor() {
                this.workTime = 25 * 60; // 25 minutes in seconds
                this.breakTime = 5 * 60; // 5 minutes in seconds
                this.longBreakTime = 15 * 60; // 15 minutes in seconds
                this.currentTime = this.workTime;
                this.isRunning = false;
                this.isWorkSession = true;
                this.sessionCount = 1;
                this.totalSessions = 4;
                this.interval = null;
                this.audioContext = null;
                this.notificationInterval = null;
                this.isNotificationPlaying = false;
                
                this.initializeElements();
                this.bindEvents();
                this.updateDisplay();
            }
            
            initializeElements() {
                this.timerDisplay = document.getElementById('timerDisplay');
                this.sessionType = document.getElementById('sessionType');
                this.progressFill = document.getElementById('progressFill');
                this.startPauseBtn = document.getElementById('startPauseBtn');
                this.resetBtn = document.getElementById('resetBtn');
                this.workTimeInput = document.getElementById('workTime');
                this.breakTimeInput = document.getElementById('breakTime');
                this.longBreakTimeInput = document.getElementById('longBreakTime');
                this.workModeBtn = document.getElementById('workModeBtn');
                this.restModeBtn = document.getElementById('restModeBtn');
            }
            
            bindEvents() {
                this.startPauseBtn.addEventListener('click', () => this.toggleStartPause());
                this.resetBtn.addEventListener('click', () => this.reset());
                
                this.workModeBtn.addEventListener('click', () => this.setWorkMode());
                this.restModeBtn.addEventListener('click', () => this.setRestMode());
                
                this.workTimeInput.addEventListener('change', () => this.updateWorkTime());
                this.breakTimeInput.addEventListener('change', () => this.updateBreakTime());
                this.longBreakTimeInput.addEventListener('change', () => this.updateLongBreakTime());
            }
            
            start() {
                if (!this.isRunning) {
                    this.isRunning = true;
                    this.interval = setInterval(() => this.tick(), 1000);
                    this.startPauseBtn.textContent = 'Pause';
                    this.startPauseBtn.classList.add('paused');
                }
            }
            
            pause() {
                if (this.isRunning) {
                    this.isRunning = false;
                    clearInterval(this.interval);
                    this.startPauseBtn.textContent = 'Start';
                    this.startPauseBtn.classList.remove('paused');
                }
                this.stopNotificationSound();
            }
            
            toggleStartPause() {
                if (this.isRunning) {
                    this.pause();
                } else {
                    this.start();
                }
            }
            
            reset() {
                this.pause();
                this.isWorkSession = true;
                this.sessionCount = 1;
                this.currentTime = this.workTime;
                this.updateDisplay();
                this.updateSessionInfo();
                this.stopNotificationSound();
            }
            
            tick() {
                if (this.currentTime > 0) {
                    this.currentTime--;
                    this.updateDisplay();
                } else {
                    this.sessionComplete();
                }
            }
            
            sessionComplete() {
                this.pause();
                this.playNotificationSound();
                this.showNotification();
                
                if (this.isWorkSession) {
                    // Work session completed, start break
                    this.isWorkSession = false;
                    this.currentTime = this.sessionCount % 4 === 0 ? this.longBreakTime : this.breakTime;
                } else {
                    // Break completed, start work session
                    this.isWorkSession = true;
                    this.sessionCount++;
                    this.currentTime = this.workTime;
                }
                
                this.updateDisplay();
                this.updateSessionInfo();
            }
            
            updateDisplay() {
                const minutes = Math.floor(this.currentTime / 60);
                const seconds = this.currentTime % 60;
                const timeString = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                this.timerDisplay.textContent = timeString;
                
                // Update browser tab title with timer
                const sessionType = this.isWorkSession ? 'Work' : (this.sessionCount % 4 === 0 ? 'Long Break' : 'Short Break');
                document.title = `${timeString} - ${sessionType} | Pomodoro Timer`;
                
                // Update progress bar
                const totalTime = this.isWorkSession ? this.workTime : (this.sessionCount % 4 === 0 ? this.longBreakTime : this.breakTime);
                const progress = ((totalTime - this.currentTime) / totalTime) * 100;
                this.progressFill.style.width = `${progress}%`;
                
                // Update container class for styling
                const container = document.querySelector('.container');
                container.className = this.isWorkSession ? 'container work' : 'container break';
            }
            
            updateSessionInfo() {
                this.sessionType.textContent = this.isWorkSession ? 'Work Session' : 
                    (this.sessionCount % 4 === 0 ? 'Long Break' : 'Short Break');
                this.updateModeButtons();
            }
            
            updateWorkTime() {
                this.workTime = parseInt(this.workTimeInput.value) * 60;
                if (this.isWorkSession && !this.isRunning) {
                    this.currentTime = this.workTime;
                    this.updateDisplay();
                }
            }
            
            updateBreakTime() {
                this.breakTime = parseInt(this.breakTimeInput.value) * 60;
                if (!this.isWorkSession && !this.isRunning && this.sessionCount % 4 !== 0) {
                    this.currentTime = this.breakTime;
                    this.updateDisplay();
                }
            }
            
            updateLongBreakTime() {
                this.longBreakTime = parseInt(this.longBreakTimeInput.value) * 60;
                if (!this.isWorkSession && !this.isRunning && this.sessionCount % 4 === 0) {
                    this.currentTime = this.longBreakTime;
                    this.updateDisplay();
                }
            }
            
            setWorkMode() {
                this.stopNotificationSound();
                this.isWorkSession = true;
                this.currentTime = this.workTime;
                this.updateDisplay();
                this.updateSessionInfo();
                this.updateModeButtons();
                this.start();
            }
            
            setRestMode() {
                this.stopNotificationSound();
                this.isWorkSession = false;
                this.currentTime = this.breakTime;
                this.updateDisplay();
                this.updateSessionInfo();
                this.updateModeButtons();
                this.start();
            }
            
            updateModeButtons() {
                if (this.isWorkSession) {
                    this.workModeBtn.classList.add('active');
                    this.restModeBtn.classList.remove('active');
                } else {
                    this.workModeBtn.classList.remove('active');
                    this.restModeBtn.classList.add('active');
                }
            }
            
            playNotificationSound() {
                try {
                    // Create a simple beep sound using Web Audio API
                    if (!this.audioContext) {
                        this.audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    }
                    
                    this.isNotificationPlaying = true;
                    
                    // Play continuous notification sound every 2 seconds
                    this.notificationInterval = setInterval(() => {
                        if (this.isNotificationPlaying) {
                            const oscillator = this.audioContext.createOscillator();
                            const gainNode = this.audioContext.createGain();
                            
                            oscillator.connect(gainNode);
                            gainNode.connect(this.audioContext.destination);
                            
                            oscillator.frequency.setValueAtTime(800, this.audioContext.currentTime);
                            oscillator.frequency.setValueAtTime(600, this.audioContext.currentTime + 0.1);
                            oscillator.frequency.setValueAtTime(800, this.audioContext.currentTime + 0.2);
                            
                            gainNode.gain.setValueAtTime(0.3, this.audioContext.currentTime);
                            gainNode.gain.exponentialRampToValueAtTime(0.01, this.audioContext.currentTime + 0.5);
                            
                            oscillator.start(this.audioContext.currentTime);
                            oscillator.stop(this.audioContext.currentTime + 0.5);
                        }
                    }, 2000);
                } catch (error) {
                    console.log('Audio notification not available');
                }
            }
            
            stopNotificationSound() {
                this.isNotificationPlaying = false;
                if (this.notificationInterval) {
                    clearInterval(this.notificationInterval);
                    this.notificationInterval = null;
                }
            }
            
            showNotification() {
                if ('Notification' in window) {
                    if (Notification.permission === 'granted') {
                        const message = this.isWorkSession ? 
                            'Break time! Take a well-deserved rest.' : 
                            'Back to work! Time to focus.';
                        new Notification('Pomodoro Timer', {
                            body: message,
                            icon: 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y=".9em" font-size="90">üçÖ</text></svg>'
                        });
                    } else if (Notification.permission !== 'denied') {
                        Notification.requestPermission().then(permission => {
                            if (permission === 'granted') {
                                this.showNotification();
                            }
                        });
                    }
                }
            }
        }
        
        // Initialize the timer when the page loads
        document.addEventListener('DOMContentLoaded', () => {
            new PomodoroTimer();
        });
    </script>
</body>
</html>
